<!DOCTYPE html><html lang="en"><head>
      <!--Google Tag Manager-->
      <script class="gtm">
        var dataLayer = [{
        'labName': 'Virtual Lab',
        'discipline': 'Test',
        'college': 'COEP',
        'phase': 'Testing',
        'expName': 'WRITE A PROGRAM TO CONTROL AN LED BRIGHTNESS BY GENERATING A PWM SIGNAL ON PIC18
    SERIES MICROCONTROLLER',
        'expShortName': 'pwm-generation'
        }];
    
        (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&amp;l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-5NMQ9NQ');
      </script>
      <!--End Google Tag Manager-->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="" name="description">
    <meta content="" name="author">
    
    	<meta name="experiment-short-name" content="pwm-generation">
    	<meta name="developer-institute" content="COEP">
    	<meta name="learning-unit" content="WRITE A PROGRAM TO CONTROL AN LED BRIGHTNESS BY GENERATING A PWM SIGNAL ON PIC18
    SERIES MICROCONTROLLER">
    	<meta name="task-name" content="Theory">
    
    <!-- For iPhone -->
    <meta name="msapplication-TileColor" content="#4076e0">
    <!-- Chrome, Firefox OS and Opera -->
    <meta name="theme-color" content="#4076e0">
    <!-- Windows Phone -->
    <meta name="msapplication-navbutton-color" content="#4076e0">
    <title>Virtual Labs</title>
    <link rel="shortcut icon" href="./assets/images/favicon.ico">
    <link rel="stylesheet" href="./assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/4.0.0/github-markdown.min.css" integrity="sha512-Oy18vBnbSJkXTndr2n6lDMO5NN31UljR8e/ICzVPrGpSud4Gkckb8yUpqhKuUNoE+o9gAb4O/rAxxw1ojyUVzg==" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans&amp;family=Raleway&amp;display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./assets/fonts/font-awesome-4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="./assets/css/github-markdown.min.css">
    <link rel="stylesheet" href="./assets/css/vlabs-style.css">
    <link rel="stylesheet" href="./assets/css/toast.css">
    <link rel="stylesheet" href="./assets/katex_assets/katex.min.css">
    
    <script src="./assets/js/jquery-3.4.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js" integrity="sha384-q2kxQ16AaE6UbzuKqyBE9/u/KzioAlnx2maXQHiDX9d4/zp8Ok3f+M7DPm+Ib6IU" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.min.js" integrity="sha384-pQQkAEnwaBkjpqZ8RU1fF1AKtTcHJwFl3pblpTlHXybJjHpMYo79HY3hIi4NKxyj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
      h1 {
      font-size: 1.8rem;
      }
      h2 {
      font-size: 1.4rem;
      }
      h3 {
      font-size: 1.2rem;
      }

      h2, h3 {
      font-weight: 800;
      }
    </style>
    
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"></head>
  <body class="p-0 container-fluid vlabs-page d-flex flex-column justify-content-between">
      <!--Google Tag Manager (noscript)-->
      <noscript class="gtm">
        <iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-5NMQ9NQ" style="display:none;visibility:hidden" width="0">
        </iframe>
      </noscript>
      <!--End Google Tag Manager (noscript)-->
  
      <header class="vlabs-header sticky-top bg-white">
        <nav class="p-0 navbar navbar-light d-flex align-items-stretch">
          
          <button class="navbar-toggler px-4" type="button" onclick="toggle()">
            <span class="navbar-toggler-icon"></span>
          </button>
      
          <div class="d-flex justify-content-center">        
            <a href="https://vlab.co.in" class="navbar-brand">
              <img src="./assets/images/vlabs-color-small-moe.jpg" alt="vlabs logo" class="vlabs-logo">
            </a>
          </div>
          
          <div id="headerNavbar" class="d-none border-top flex-grow-1 d-lg-flex align-items-center justify-content-end">
            <div class="svc-rating-display">
                <rating-display spreadsheetid="1x12nhpp0QvnsA6x-O1sV4IA9SAbfVsq_wiexWkutOmU" sheetname="Experiment-Database" columnname="Experiment Short Name" columnvalue="pwm-generation" imagesdirectory="/plugins/svc-rating/images/">
                </rating-display>
            </div>      <div class="svc-rating-submit">
                <rating-submit title="Rate" this="" experiment="">
                </rating-submit>
            </div>      <bug-report id="bug-report" title="[BUG REPORT] WRITE A PROGRAM TO CONTROL AN LED BRIGHTNESS BY GENERATING A PWM SIGNAL ON PIC18
      SERIES MICROCONTROLLER" page-type="text" context-info="{&quot;organisation&quot;:&quot;Virtual Labs&quot;,&quot;developer_institute&quot;:&quot;COEP&quot;,&quot;expname&quot;:&quot;WRITE A PROGRAM TO CONTROL AN LED BRIGHTNESS BY GENERATING A PWM SIGNAL ON PIC18\nSERIES MICROCONTROLLER&quot;,&quot;labname&quot;:&quot;Virtual Lab&quot;,&quot;phase&quot;:&quot;Testing&quot;}" checkbox-json="{&quot;text&quot;:[&quot;Insufficient Content&quot;],&quot;video&quot;:[&quot;Insufficient Content&quot;],&quot;assesment&quot;:[&quot;Incorrect Options&quot;,&quot;Incorrect Answer&quot;,&quot;Incorrect Question&quot;],&quot;assessment&quot;:[&quot;Incorrect Options&quot;,&quot;Incorrect Answer&quot;,&quot;Incorrect Question&quot;],&quot;simulation&quot;:[&quot;Simulation Not Working&quot;,&quot;Incorrect Results/Observations&quot;,&quot;Insufficient/Incorrect Instructions&quot;],&quot;DEFAULT&quot;:[&quot;Page Not Loading&quot;,&quot;Content Not Visible&quot;,&quot;Incorrect Content&quot;]}" button_style="border: none; color: #fff; background-color: #288ec8; text-align: center; font-size: 1.05rem; border-radius: 1em;padding: 0.6em 1.2em; margin: 0 10px" position="override" custom_button_class="v-button"></bug-report>
          </div>
        </nav>
      </header>
      <div class="container-fluid flex-fill d-flex flex-column vlabs-page-main">
        <div class="row d-flex justify-content-between">
          <div class="flex-column">
          <div class="row py-4 px-4 breadcrumbs">
          	<div class="title is-4 tools">Tools</div>
          	<span class="mx-2">
          		<i aria-hidden="true" class="fa fa-angle-right"></i>
          	</span>
          	<a href="performance-report.html" class="my-2 mx-3" target="_blank">
          		<button class="v-button">Performance Tool</button>
          	</a>
          	<a href="validator-report.html" class="my-2 mx-3" target="_blank">
          		<button class="v-button">Validation Tool</button>
          	</a>
          </div>
          </div>
        </div>
        <div class="row flex-grow-1 d-flex flex-nowrap flex-column flex-lg-row">
          <div class="modal fade popupmenu" id="popupMenu" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
              <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                  <div class="modal-content">
                      <div class="modal-header">
                          <h5 class="modal-title" id="exampleModalLabel">
                              <a href="https://vlab.co.in" class="navbar-brand">
                                  <img src="./assets/images/vlabs-color-small-moe.jpg" alt="vlabs logo" class="vlabs-logo">
                              </a>
                          </h5>
                          <button type="button" class="btn-close align-self-center" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                      <div class="modal-body nav-menu">
                              <div>
                                  <div class="d-flex nav-menu-body">
                                      <a href="index.html" class="p-2 ">
                                      Aim
                                      </a>
                                      
                                  </div>
                                  <div id="t-" class="collapse">
                                      <div class="px-3 d-flex flex-column tasks align-items-center align-items-lg-start">
                                      </div>
                                  </div>
                              </div>
                              <div>
                                  <div class="d-flex nav-menu-body">
                                      <a href="theory.html" class="p-2  current-item ">
                                      Theory
                                      </a>
                                      
                                  </div>
                                  <div id="t-" class="collapse">
                                      <div class="px-3 d-flex flex-column tasks align-items-center align-items-lg-start">
                                      </div>
                                  </div>
                              </div>
                              <div>
                                  <div class="d-flex nav-menu-body">
                                      <a href="pretest.html" class="p-2 ">
                                      Pretest
                                      </a>
                                      
                                  </div>
                                  <div id="t-" class="collapse">
                                      <div class="px-3 d-flex flex-column tasks align-items-center align-items-lg-start">
                                      </div>
                                  </div>
                              </div>
                              <div>
                                  <div class="d-flex nav-menu-body">
                                      <a href="procedure.html" class="p-2 ">
                                      Procedure
                                      </a>
                                      
                                  </div>
                                  <div id="t-" class="collapse">
                                      <div class="px-3 d-flex flex-column tasks align-items-center align-items-lg-start">
                                      </div>
                                  </div>
                              </div>
                              <div>
                                  <div class="d-flex nav-menu-body">
                                      <a href="simulation.html" class="p-2 ">
                                      Simulation
                                      </a>
                                      
                                  </div>
                                  <div id="t-" class="collapse">
                                      <div class="px-3 d-flex flex-column tasks align-items-center align-items-lg-start">
                                      </div>
                                  </div>
                              </div>
                              <div>
                                  <div class="d-flex nav-menu-body">
                                      <a href="posttest.html" class="p-2 ">
                                      Posttest
                                      </a>
                                      
                                  </div>
                                  <div id="t-" class="collapse">
                                      <div class="px-3 d-flex flex-column tasks align-items-center align-items-lg-start">
                                      </div>
                                  </div>
                              </div>
                              <div>
                                  <div class="d-flex nav-menu-body">
                                      <a href="references.html" class="p-2 ">
                                      References
                                      </a>
                                      
                                  </div>
                                  <div id="t-" class="collapse">
                                      <div class="px-3 d-flex flex-column tasks align-items-center align-items-lg-start">
                                      </div>
                                  </div>
                              </div>
                              <div>
                                  <div class="d-flex nav-menu-body">
                                      <a href="feedback.html" class="p-2 ">
                                      Feedback
                                      </a>
                                      
                                  </div>
                                  <div id="t-" class="collapse">
                                      <div class="px-3 d-flex flex-column tasks align-items-center align-items-lg-start">
                                      </div>
                                  </div>
                              </div>
                      </div>
                  </div>
              </div>
          </div>
          <div class="nav flex-column sidebar nav-menu flex-shrink-0 px-lg-4 align-items-center align-items-lg-start hidden d-none d-lg-flex" id="menu">
                <div>
                    <div class="d-flex nav-menu-body">
                        <a href="index.html" class="p-2 ">
                        Aim
                        </a>
                        
                    </div>
                    <div id="t-" class="collapse">
                        <div class="px-3 d-flex flex-column tasks align-items-center align-items-lg-start">
                        </div>
                    </div>
                </div>
                <div>
                    <div class="d-flex nav-menu-body">
                        <a href="theory.html" class="p-2  current-item ">
                        Theory
                        </a>
                        
                    </div>
                    <div id="t-" class="collapse">
                        <div class="px-3 d-flex flex-column tasks align-items-center align-items-lg-start">
                        </div>
                    </div>
                </div>
                <div>
                    <div class="d-flex nav-menu-body">
                        <a href="pretest.html" class="p-2 ">
                        Pretest
                        </a>
                        
                    </div>
                    <div id="t-" class="collapse">
                        <div class="px-3 d-flex flex-column tasks align-items-center align-items-lg-start">
                        </div>
                    </div>
                </div>
                <div>
                    <div class="d-flex nav-menu-body">
                        <a href="procedure.html" class="p-2 ">
                        Procedure
                        </a>
                        
                    </div>
                    <div id="t-" class="collapse">
                        <div class="px-3 d-flex flex-column tasks align-items-center align-items-lg-start">
                        </div>
                    </div>
                </div>
                <div>
                    <div class="d-flex nav-menu-body">
                        <a href="simulation.html" class="p-2 ">
                        Simulation
                        </a>
                        
                    </div>
                    <div id="t-" class="collapse">
                        <div class="px-3 d-flex flex-column tasks align-items-center align-items-lg-start">
                        </div>
                    </div>
                </div>
                <div>
                    <div class="d-flex nav-menu-body">
                        <a href="posttest.html" class="p-2 ">
                        Posttest
                        </a>
                        
                    </div>
                    <div id="t-" class="collapse">
                        <div class="px-3 d-flex flex-column tasks align-items-center align-items-lg-start">
                        </div>
                    </div>
                </div>
                <div>
                    <div class="d-flex nav-menu-body">
                        <a href="references.html" class="p-2 ">
                        References
                        </a>
                        
                    </div>
                    <div id="t-" class="collapse">
                        <div class="px-3 d-flex flex-column tasks align-items-center align-items-lg-start">
                        </div>
                    </div>
                </div>
                <div>
                    <div class="d-flex nav-menu-body">
                        <a href="feedback.html" class="p-2 ">
                        Feedback
                        </a>
                        
                    </div>
                    <div id="t-" class="collapse">
                        <div class="px-3 d-flex flex-column tasks align-items-center align-items-lg-start">
                        </div>
                    </div>
                </div>
          </div>          <div class="vlabs-page-content px-5 pb-4 flex-grow-1 markdown-body">
            <div class="text-center fix-spacing">
              <h2 id="write-a-program-to-control-an-led-brightness-by-generating-a-pwm-signal-on-pic18-series-microcontroller">Write a program to control an LED brightness by generating a PWM signal on PIC18 series microcontroller</h2>
          
            </div>
              <h2 id="theory">Theory</h2>
          <h5 id="1-pwm-technique">1. PWM Technique</h5>
          <p>Pulse Width Modulation (PWM) is a technique used to control the power delivered to electrical devices by varying the duty cycle of a signal. It works by switching a signal between high and low states at a constant frequency, where the proportion of time the signal remains high (the duty cycle) determines the effective output power. A higher duty cycle means more power is delivered, while a lower duty cycle reduces power. PWM is widely used in motor speed control, LED dimming, and power regulation in electronic circuits due to its efficiency and precision.</p>
          <p><img src="images/square_wave.PNG" alt="image"></p>
          <p>Fig: PWM output with 50% duty cycle</p>
          <h5 id="2-ccp-module-of-pic18xx-series-microcontroller">2. CCP Module of PIC18xx series microcontroller</h5>
          <p>  Depending upon the device selected there are 1 – 4 CCP (Capture/Compare/PWM) modules in PIC micro controller. Each module contains a 16-bit register, which can operate as a 16-bit Capture register, a 16-bit Compare register or a PWM Master/Slave Duty Cycle register. Each Capture/Compare/PWM module is associated with a control register (generically, CCPxCON) and a data register (CCPRx). The data register, in turn, is comprised of two 8-bit registers: CCPRxL (low byte) and CCPRxH (high byte). All registers are both readable and writable. The CCP modules utilize Timers 1, 2 or 3, depending on the mode selected. Timer1 and Timer3 are available to modules in Capture or Compare modes, while Timer2 is available for modules in PWM mode.
            <br> The pin assignment for CCP2 (Capture input, Compare and PWM output) can change, based on device configuration. The CCP2MX Configuration bit determines which pin CCP2 is multiplexed to. By default, it is assigned to RC1 (CCP2MX = 1). If the Configuration bit is cleared, CCP2 is multiplexed with RB3. Changing the pin assignment of CCP2 does not automatically change any requirements for configuring the port pin. Users must always verify that the appropriate TRIS register is configured correctly for CCP2 operation, regardless of where it is located.</p>
          <h5 id="21-capture-mode-applications">2.1 Capture Mode Applications</h5>
          <ul>
          <li>Event arrival time recording </li>
          <li>Period measurement </li>
          <li>Pulse-width measurement </li>
          <li>Interrupt generation </li>
          <li>Event counting </li>
          <li>Time reference </li>
          <li>Duty cycle measurement </li>
          </ul>
          <h5 id="22-compare-mode-applications">2.2 Compare Mode Applications</h5>
          <ul>
          <li>Generate … <ul>
          <li>Single pulse <br></li>
          <li>Train of pulses <br></li>
          <li>Periodic waveform <br></li>
          </ul>
          </li>
          <li>Start ADC conversion </li>
          <li>Time reference</li>
          </ul>
          <h4 id="3-pwm-mode-of-ccp-module">3. PWM Mode of CCP Module</h4>
          <p> In Pulse-Width Modulation (PWM) mode, the CCPx pin produces up to a 10- bit resolution PWM output. Since the CCP2 pin is multiplexed with a PORTB or PORTC data latch, the appropriate TRIS bit must be cleared to make the CCP2 pin an output. A PWM output has a time base (period) and a time that the output stays high (duty cycle). The frequency of the PWM is the inverse of the period (1/period).
            <br> The simplified block diagram of the CCP1 configured to generate PWM is shown in Figure 1. with example waveforms in Figure 2. The block diagram for CCP2 is similar to CCP1. It can be seen that Figure 1. contains CCPR1L, Timer 2, comparator and the PR2 register working together. Although not shown, Timer 2 is still driven from the on-chip oscillator, through its own prescaler. The comparator output drives an R–S flip-flop. When the value in PR2 equals Timer 2, then the comparator clears the timer and sets the flip-flop, whose output goes high. This is seen in Figure 2. This action sets the PWM period.
           <br> Having established the PWM period, let us consider how the pulse width is determined. A second Compare register arrangement is introduced to do this. This is made up of the CCPR1H register, plus a second comparator. As the logic of the diagram shows, every time this comparator finds equal input values, it resets the output flip-flop, clearing the output to zero. It is this comparator that determines the pulse width. Again, this is shown in Figure 2. To change the pulse width, the programmer writes to the CCPR1L register, which acts as a buffer. Its value is transferred to CCPR1H only when a PWM cycle is complete, to avoid output errors in the process. The block diagram is made more complex because three of the registers are ‘stretched’, to make them potentially 10-bit instead of 8-bit. This increases the resolution. CCPR1L uses two bits of the CCP1CON register. CCPR1H is extended with an internal 2-bit latch, while the extension to Timer 2 is as described in Note 1 of Figure 1. Because of these two extra bits, in its 10-bit version it is effectively clocked direct from the internal oscillator signal, undivided. If the prescaler is used, then it acts on this frequency, not the usual Fosc/4. Notice, however, that the PR2 register remains at eight bits. This means that the PWM period has only an 8-bit equivalent resolution.</p>
          <p><img src="images/figure1.PNG" alt="1"></p>
          <p><img src="images/figure2.PNG" alt="2"></p>
          <h5 id="31-pwm-period-and-duty-cycle">3.1 PWM Period and Duty Cycle</h5>
          <p>The PWM period T is determined by the interaction of the PR2 register and the eight 
          bits of Timer 2. It may be calculated as follows: </p>
          <p><img src="images/figure10.png" alt="image"></p>
          <p>Where, <br>
          Timer 2 input Clock = 4 * Tosc * TMR2 Prescaler value <br>
          Fosc = Input Crystal Oscillator Frequency <br>
          Tosc = input clock period = 1/Fosc <br>
          Fpwm = PWM frequency <br>
          Tpwm = PWM Period = 1/Fpwm </p>
          <p>The PWM pulse width Ton is determined by the interaction of the extended CCPR1H register (all 10 bits of it) and the extended (10-bit) Timer2. It may be calculated as follows: <br>
              <strong>Ton = (Pulse width register) x (PWM Timer input clock period)</strong>  <br>
          Where, ‘PWM timer input clock period’ is the period of the clock input to the extended Timer 2 and ‘pulse width register’ is the value in the extended CCPR1L register. <br>
          Hence, <br>
              <strong>Ton = (CCPR1L: CCP1CON&lt;5:4&gt;) x (Tosc * TMR2 Prescaler value)</strong>  <br>
          Note that there is not here a factor of four with the Tosc term, as we are using 10-bits of Timer 2. Rearranging the above equation, to find value of pulse width register (CCPR1L: CCP1CON &lt;5:4&gt;).</p>
          <p><img src="images/figure11.png" alt="image"></p>
          <h5 id="32-pin-description">3.2 Pin Description</h5>
          <table>
          <thead>
          <tr>
          <th>Signal</th>
          <th align="center">Pin No.</th>
          <th align="right">Symbol</th>
          </tr>
          </thead>
          <tbody><tr>
          <td>CCP2^(1)</td>
          <td align="center">16</td>
          <td align="right">RC1/T1OSI/CCP2^(1)/UOE</td>
          </tr>
          <tr>
          <td>CCP1</td>
          <td align="center">17</td>
          <td align="right">RC2/CCP1/P1A</td>
          </tr>
          <tr>
          <td>CCP2^(1)</td>
          <td align="center">36</td>
          <td align="right">RB3/AN9/CCP2^(1)/VPO</td>
          </tr>
          </tbody></table>
          <p><strong>Note 1: RB3 is the alternate pin for CCP2 multiplexing.</strong></p>
          <h5 id="33-pwm-register-map">3.3 PWM Register Map:</h5>
          <table>
          <thead>
          <tr>
          <th>SFR</th>
          <th align="center">Description</th>
          <th align="right">Access</th>
          <th>Reset Value</th>
          <th align="center">Address</th>
          </tr>
          </thead>
          <tbody><tr>
          <td>CCP1CON</td>
          <td align="center">Standard CCP1 Control Reg.</td>
          <td align="right">Read/Write</td>
          <td>0x00</td>
          <td align="center">0xFBD</td>
          </tr>
          <tr>
          <td>CCPR1L</td>
          <td align="center">CCP1 Register low byte</td>
          <td align="right">Read/Write</td>
          <td>unknown</td>
          <td align="center">0xFBE</td>
          </tr>
          <tr>
          <td>CCPR1H</td>
          <td align="center">CCP1 Register high byte</td>
          <td align="right">No access</td>
          <td>unknown</td>
          <td align="center">0xFBF</td>
          </tr>
          <tr>
          <td>CCP2CON</td>
          <td align="center">Standard CCP2 Control Reg.</td>
          <td align="right">Read/Write</td>
          <td>0x00</td>
          <td align="center">0xFBA</td>
          </tr>
          <tr>
          <td>CCPR2L</td>
          <td align="center">CCP2 Register high byte</td>
          <td align="right">Read/Write</td>
          <td>unknown</td>
          <td align="center">0xFBB</td>
          </tr>
          <tr>
          <td>CCPR2H</td>
          <td align="center">CCP2 Register high byte</td>
          <td align="right">No access</td>
          <td>unknown</td>
          <td align="center">0XFBC</td>
          </tr>
          <tr>
          <td>T2CON</td>
          <td align="center">Timer 2 Control Register</td>
          <td align="right">Read/Write</td>
          <td>0x00</td>
          <td align="center">0xFCA</td>
          </tr>
          <tr>
          <td>TMR2</td>
          <td align="center">Timer 2 Register</td>
          <td align="right">Read/Write</td>
          <td>0x00</td>
          <td align="center">0xFCC</td>
          </tr>
          <tr>
          <td>PR2</td>
          <td align="center">Timer 2 Period register</td>
          <td align="right">Read/Write</td>
          <td>0xFF</td>
          <td align="center">0xFCB</td>
          </tr>
          </tbody></table>
          <h5 id="34-pwm-mode-register-description">3.4 PWM Mode Register Description</h5>
          <h5 id="341-standard-cppx-control-register-ccpxcon--ccp1conccp2con">3.4.1 Standard CPPx Control Register (CCPxCON – CCP1CON/CCP2CON)</h5>
          <table>
          <thead>
          <tr>
          <th>U-0</th>
          <th align="center">U-0</th>
          <th align="right">R/W-0</th>
          <th>R/W-0</th>
          <th align="center">R/W-0</th>
          <th align="right">R/W-0</th>
          <th>R/W-0</th>
          <th align="center">R/W-0</th>
          </tr>
          </thead>
          <tbody><tr>
          <td>_(1)</td>
          <td align="center">_(1)</td>
          <td align="right">DCxB1</td>
          <td>DCxB0</td>
          <td align="center">CCPxM3</td>
          <td align="right">CCPxM2</td>
          <td>CCPxM1</td>
          <td align="center">CCPxM0</td>
          </tr>
          <tr>
          <td>bit 7</td>
          <td align="center"></td>
          <td align="right"></td>
          <td></td>
          <td align="center"></td>
          <td align="right"></td>
          <td></td>
          <td align="center">bit 0</td>
          </tr>
          </tbody></table>
          <table>
          <thead>
          <tr>
          <th>Bit No.</th>
          <th align="center">Control Bit</th>
          <th align="center">Description</th>
          </tr>
          </thead>
          <tbody><tr>
          <td>Bit 7 - 6</td>
          <td align="center">Unimplemented</td>
          <td align="center">Read as '0'</td>
          </tr>
          <tr>
          <td>Bit 5 - 4</td>
          <td align="center">DCxB1:DCxB0</td>
          <td align="center">PWM Duty Cycle Bit 1 and Bit 0 for CCPx Module Unused in Capture mode &amp; Compare mode: <br> PWM mode: These bits are the two LSbs (bit 1 and bit0) of the 10-bit PWM duty cycle. The eight MSbs of the duty cycle are found in CCPR1L.</td>
          </tr>
          <tr>
          <td>Bit 3 - 0</td>
          <td align="center">CCPxM3:CCPxM0</td>
          <td align="center">CCPx Module Mode Select bits <br> 0000 = CCP disabled (resets CCPx module) <br> 0001 = Reserved <br> 0010 = Compare mode: toggle output on match (CCPxIF bit is set) <br> 0011 = Reserved <br> 0100 = Capture mode: every falling edge <br> 0101 = Capture mode: every rising edge <br> 0110 = Capture mode: every 4th rising edge <br> 0111 = Capture mode: every 16th rising edge <br> 1000 = Compare mode: initialize CCPx pin low; on compare match, force CCPx pin high (CCPxIF bit is set) <br> 1001 = Compare mode: initialize CCPx pin high; on compare match, force CCPx pin low (CCPxIF bit is set) <br> 1010 = Compare mode: generate software interrupt on compare match (CCPxIF bit is set, CCPx pin reflects I/O state) <br> 1011 = Compare mode: trigger special event, reset timer, start A/D conversion on CCP2 match (CCPxIF bit is set) <br> <strong>11xx = PWM mode</strong></td>
          </tr>
          </tbody></table>
          <h5 id="342-timer-2-control-register">3.4.2 Timer 2 Control Register</h5>
          <table>
          <thead>
          <tr>
          <th>U-0</th>
          <th align="center">R/W-0</th>
          <th align="right">R/W-0</th>
          <th>R/W-0</th>
          <th align="center">R/W-0</th>
          <th align="right">R/W-0</th>
          <th>R/W-0</th>
          <th align="center">R/W-0</th>
          </tr>
          </thead>
          <tbody><tr>
          <td>-</td>
          <td align="center">T2OUTPS3</td>
          <td align="right">T2OUTPS2</td>
          <td>T2OUTPS1</td>
          <td align="center">T2OUTPS0</td>
          <td align="right">TMR2ON</td>
          <td>T2CKPS1</td>
          <td align="center">T2CKPS0</td>
          </tr>
          <tr>
          <td>bit 7</td>
          <td align="center"></td>
          <td align="right"></td>
          <td></td>
          <td align="center"></td>
          <td align="right"></td>
          <td></td>
          <td align="center">bit 0</td>
          </tr>
          </tbody></table>
          <table>
          <thead>
          <tr>
          <th>Bit No.</th>
          <th align="center">Control Bit</th>
          <th align="center">Description</th>
          </tr>
          </thead>
          <tbody><tr>
          <td>Bit 6 - 3</td>
          <td align="center">T2OUTPS3:T2OUTPS0:</td>
          <td align="center">Timer2 Output Postscaler Select bits (1:1 to 1:16) <br> 0000 = 1:1 Postscaler <br> 0001 = 1:2 Postscale <br> . <br> . <br> 1111 = 1:16 Postscaler</td>
          </tr>
          <tr>
          <td>Bit 2</td>
          <td align="center">TMR2ON:</td>
          <td align="center">Timer2 On bit <br> 1 = Timer2 is on, 0 = Timer2 is off</td>
          </tr>
          <tr>
          <td>Bit 1 - 0</td>
          <td align="center">T2CKPS1:T2CKPS0</td>
          <td align="center">Timer2 Clock Prescaler Select bits <br> 00 = Prescaler is 1:1 <br> 01 = Prescaler is 1:4 <br> 1x = Prescaler is 1:16</td>
          </tr>
          </tbody></table>
          <h4 id="4-timer-2-module">4. Timer 2 Module</h4>
          <p>The Timer2 module timer incorporates the following features: </p>
          <ul>
          <li>8-bit timer and period registers (TMR2 and PR2, respectively) </li>
          <li>Readable and writable (both registers) </li>
          <li>Software programmable prescaler (1:1, 1:4 and 1:16) </li>
          <li>Software programmable Postscaler (1:1 through 1:16) </li>
          <li>Interrupt on TMR2 to PR2 match </li>
          <li>Optional use as the shift clock for the MSSP module 
          The module is controlled through the T2CON register which enables or disables the timer and configures the prescaler and Postscaler. Timer2 can be shut off by clearing control bit, TMR2ON (T2CON&lt;2&gt;), to minimize power consumption. 
          A simplified block diagram of the module is shown in Figure 3.</li>
          </ul>
          <p><img src="images/figure3.PNG" alt="3"></p>
          <h5 id="41-timer2-operation">4.1 Timer2 Operation</h5>
          <p>In normal operation, TMR2 is incremented from 00h on each clock (FOSC/4). A 2-bit counter/prescaler on the clock input gives direct input, divide-by-4 and divide-by- 16 prescale options. These are selected by the prescaler control bits, T2CKPS1:T2CKPS0 (T2CON &lt;1:0&gt;). The value of TMR2 is compared to that of the period register, PR2, on each clock cycle. When the two values match, the comparator generates a match signal as the timer output. This signal also resets the value of TMR2 to 00h on the next cycle and drives the output counter/ Postscaler.
           <br> The TMR2 and PR2 registers are both directly readable and writable. The TMR2 register is cleared on any device Reset, while the PR2 register initializes at FFh. TMR2 is not cleared when T2CON is written. Both the prescaler and postscaler counters are cleared on the following events: </p>
          <ul>
          <li>a write to the TMR2 register </li>
          <li>a write to the T2CON register </li>
          <li>any device Reset (Power-on Reset, MCLR Reset, WDT Reset or Brown-out) </li>
          </ul>
          <h5 id="42-timer2-interrupt">4.2 Timer2 Interrupt</h5>
          <p>  Timer2 also can generate an optional device interrupt. The Timer2 output signal (TMR2 to PR2 match) provides the input for the 4-bit output counter/postscaler. This counter generates the TMR2 match interrupt flag which is latched in TMR2IF (PIR1&lt;1&gt;). The interrupt is enabled by setting the TMR2 Match Interrupt Enable bit, TMR2IE (PIE1&lt;1&gt;). A range of 16 postscale options (from 1:1 through 1:16 inclusive) can be selected with the postscaler control bits, T2OUTPS3:T2OUTPS0 (T2CON&lt;6:3&gt;). </p>
          <h5 id="43-tmr2-output">4.3 TMR2 Output</h5>
          <p> The unscaled output of TMR2 is available primarily to the CCP modules, where it is used as a time base for operations in PWM mode. Timer2 can be optionally used as the shift clock source for the MSSP module operating in SPI mode. </p>
          <h4 id="5-calculation-for-pwm-operation">5. Calculation for PWM operation</h4>
          <p><strong>Desired PWM Frequency = 4 KHz</strong> </p>
          <p>Therefore,</p>
          <p><img src="images/figure12.png" alt="image"></p>
          <p><img src="images/figure4.PNG" alt="4"></p>
          <p><strong>b. For Fosc = 48 MHz</strong></p>
          <p><img src="images/figure13.png" alt="image"></p>
          <p><img src="images/figure5.PNG" alt="5"></p>
          <h4 id="6-quadruple-half-h-drivers-l293d">6. Quadruple half H Drivers (L293D)</h4>
          <p> The L293D is quadruple high-current half-H drivers. The L293D is designed to provide bidirectional drive currents of up to 600-mA at voltages from 4.5 V to 36 V. The device is designed to drive inductive loads such as relays, solenoids, dc and bipolar stepping motors, as well as other high-current/high-voltage loads in positive-supply applications. All inputs are TTL compatible. Each output is a complete totem-pole drive circuit, with a Darlington transistor sink and a pseudo-Darlington source. 
           <br> Drivers are enabled in pairs, with drivers 1 and 2 enabled by 1,2EN and drivers 3 and 4 enabled by 3,4EN as shown in pin diagram and function table. When an enable input is high, the associated drivers are enabled, and their outputs are active and in phase with their inputs. When the enable input is low, those drivers are disabled, and their outputs are off and in the high-impedance state. With the proper data inputs, each pair of drivers forms a full-H (or bridge) reversible drive suitable for solenoid or motor applications. </p>
          <p><img src="images/figure6.PNG" alt="6"></p>
          
          </div>
          <div class="bug-report-mobile">
              <bug-report id="bug-report" title="[BUG REPORT] WRITE A PROGRAM TO CONTROL AN LED BRIGHTNESS BY GENERATING A PWM SIGNAL ON PIC18
          SERIES MICROCONTROLLER" page-type="text" context-info="{&quot;organisation&quot;:&quot;Virtual Labs&quot;,&quot;developer_institute&quot;:&quot;COEP&quot;,&quot;expname&quot;:&quot;WRITE A PROGRAM TO CONTROL AN LED BRIGHTNESS BY GENERATING A PWM SIGNAL ON PIC18\nSERIES MICROCONTROLLER&quot;,&quot;labname&quot;:&quot;Virtual Lab&quot;,&quot;phase&quot;:&quot;Testing&quot;}" checkbox-json="{&quot;text&quot;:[&quot;Insufficient Content&quot;],&quot;video&quot;:[&quot;Insufficient Content&quot;],&quot;assesment&quot;:[&quot;Incorrect Options&quot;,&quot;Incorrect Answer&quot;,&quot;Incorrect Question&quot;],&quot;assessment&quot;:[&quot;Incorrect Options&quot;,&quot;Incorrect Answer&quot;,&quot;Incorrect Question&quot;],&quot;simulation&quot;:[&quot;Simulation Not Working&quot;,&quot;Incorrect Results/Observations&quot;,&quot;Insufficient/Incorrect Instructions&quot;],&quot;DEFAULT&quot;:[&quot;Page Not Loading&quot;,&quot;Content Not Visible&quot;,&quot;Incorrect Content&quot;]}" position="override" button_style="
                          position: fixed; 
                          bottom: 20px;
                          right: 20px;
                          z-index: 1;
                          font-size: 0;
                          padding: 25px;
                          border-radius: 50%;
                          border: none;
                          background-color: #0fc0ff;
                          background-image: url(data:image/png;base64,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);
                          background-repeat: no-repeat;
                          background-position: center;
                          background-size: 30px;
                          filter: invert(1);">
              </bug-report>
          </div>        </div>
      </div>
      <footer class="text-light pt-2 vlabs-footer d-flex flex-column">
        <div class="row px-5 mx-0">
          <div class="col d-flex flex-column">
            <span class="font-weight-bold vlabs-footer-sect-name pb-2 mb-3">Community Links</span>
            <a href="https://www.sakshat.ac.in/" class="text-light">Sakshat Portal</a>
            <a href="http://outreach.vlabs.ac.in/" class="text-light">Outreach Portal</a>
            <a href="https://vlab.co.in/faq" class="text-light">FAQ: Virtual Labs</a>
          </div>
          <div class="col d-flex flex-column">
            <span class="font-weight-bold vlabs-footer-sect-name pb-2 mb-3">Contact Us</span>
            <span> Phone: General Information: 011-26582050 </span>
            <span> Email: support@vlabs.ac.in </span>
          </div>
          <div class="col d-flex flex-column">
            <span class="font-weight-bold vlabs-footer-sect-name pb-2 mb-3">Follow Us</span>
            <div class="social-links">
      	<a class="p-2 mt-1 mr-2 d-inline-flex justify-content-center align-items-center" style="background: #55acee;" href="https://twitter.com/TheVirtualLabs">
      	  <i class="fab fa-twitter"></i>
      	</a>
      	<a class="p-2 mt-1 mr-2 d-inline-flex justify-content-center align-items-center" style="background: #3b5998;" href="https://www.facebook.com/Virtual-Labs-IIT-Delhi-301510159983871/">
      	  <i class="fab fa-facebook"></i>
      	</a>
      	<a class="p-2 mt-1 mr-2 d-inline-flex justify-content-center align-items-center" style="background: #e52d27;" href="https://www.youtube.com/watch?v=asxRaOgk6a0">
      	  <i class="fab fa-youtube"></i>
      	</a>
      	<a class="p-2 mt-1 mr-2 d-inline-flex justify-content-center align-items-center" style="background: #2867B2;" href="https://in.linkedin.com/in/virtual-labs-008ba9136">
      	  <i class="fab fa-linkedin"></i>
      	</a>
            </div>
          </div>
        </div>
        <div class="m-0 py-2 text-center" style="font-family: &quot;Open Sans&quot;, sans-serif; background: #212121;">
          <a class="text-primary font-weight-bold" href="https://www.gnu.org/licenses/agpl-3.0.en.html"> AGPL 3.0 </a>
          &nbsp;&amp;&nbsp;
          <a class="text-primary font-weight-bold" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"> Creative Commons (CC BY-NC-SA 4.0) </a>
        </div>
      </footer>
    <script src="./assets/js/toggleSidebar.js"></script>
    <script src="./assets/js/event-handler.js"></script>


    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register("sw.js");
        });
      }
    </script>
  

<script type="module" src="https://cdn.vlabs.ac.in/bug-report/vlabs-bug-report.js"></script><script type="module" src="/exp-pwm-generation-coep/plugins/svc-rating/index.js"></script><script type="module" src="/exp-pwm-generation-coep/plugins/svc-rating/config.js"></script><script type="module" src="https://apis.google.com/js/api.js"></script></body></html>